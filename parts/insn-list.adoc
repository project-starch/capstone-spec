:reproducible:

[appendix]
= Instruction Listing

== Debugging Instructions

.Debugging instructions
[%header%autowidth.stretch]
|===
|Mnemonic |Format |Func3  |Func7 | rs1 | rs2 | rd | imm[11:0] | World | Variant
|QUERY       |R |`000`    |`0000000` | I | - | - | - | * | *
|RCUPDATE    |R |`000`    |`0000001` | I | - | I | - | * | *
|ALLOC       |R |`000`    |`0000010` | I | - | I | - | * | *
|REV         |R |`000`    |`0000011` | I | - | - | - | * | *
|CAPCREATE   |R |`000`    |`0000100` | - | - | C | - | * | *
|CAPTYPE     |R |`000`    |`0000101` | I | - | C | - | * | *
|CAPNODE     |R |`000`    |`0000110` | I | - | C | - | * | *
|CAPPERM     |R |`000`    |`0000111` | I | - | C | - | * | *
|CAPBOUND    |R |`000`    |`0001000` | I | I | C | - | * | *
|CAPPRINT    |R |`000`    |`0001001` | I | - | - | - | * | *
|TAGSET      |R |`000`    |`0001010` | I | I | - | - | * | *
|TAGGET      |R |`000`    |`0001011` | I | - | I | - | * | *
|link:#debug-wrld[SETWORLD]    |R |`000`    |`0001100` | I | - | - | - | * | T
|link:#debug-wrld[ONPARTITION] |R |`000`    |`0001101` | I | - | - | - | * | T
|link:#debug-except[SETEH]       |R |`000`    |`0001110` | C | - | - | - | * | T
|link:#debug-except[ONNORMALEH]  |R |`000`    |`0001111` | I | - | - | - | * | T
|===

== {proj_name} Instructions

.Instruction format: R-type
include::r-type-format.adoc[]

.Instruction format: I-type
include::i-type-format.adoc[]

.Instruction format: S-type
include::s-type-format.adoc[]

.Capability manipulation instructions
[%header%autowidth.stretch]
|===
|Mnemonic |Format |Func3  |Func7 | rs1 | rs2 | rd | imm[11:0] | World | Variant
|link:#rev-operation[REVOKE]      |R |`001`    |`0000000` | C | - | - | - | * | *
|link:#shrink[SHRINK]      |R |`001`    |`0000001` | I | I | C | - | * | *
|link:#tighten[TIGHTEN]     |R |`001`    |`0000010` | C | Z | C | - | * | *
|link:#delin[DELIN]       |R |`001`    |`0000011` | - | - | C | - | * | *
|link:#field-get[LCC]         |R |`001`    |`0000100` | C | Z | I | - | * | *
|link:#cursor-set[SCC]         |R |`001`    |`0000101` | I | - | C | - | * | *
|link:#split[SPLIT]       |R |`001`    |`0000110` | C | I | C | - | * | *
|link:#seal[SEAL]        |R |`001`    |`0000111` | C | - | C | - | * | *
|link:#revcap-creation[MREV]        |R |`001`    |`0001000` | C | - | C | - | * | *
|link:#init[INIT]        |R |`001`    |`0001001` | C | I | C | - | * | *
|link:#cap-mov[MOVC]        |R |`001`    |`0001010` | C | - | C | - | * | *
|link:#drop[DROP]       |R |`001`    |`0001011` | C | - | - | - | * | *
|link:#cursor-inc[CINCOFFSET]  |R |`001`    |`0001100` | C | I | C | - | * | *
|link:#cursor-inc[CINCOFFSETIMM] |I |`010`    | - | C | - | C | S | * | *
|===

.Memory access instructions
[%header%autowidth.stretch]
|===
|Mnemonic |Format |`emode` |Func3  |Func7 | rs1 | rs2 | rd | imm[11:0] | World | Variant
|link:#load-store-cap[LDC] |I |`0` |`011` | - | I | - | C | S | N | T
| |I |`1` |`011` | - | C | - | C | S | N | T
| |I |- |`011` | - | C | - | C | S | S | T
| |I |- |`011` | - | C | - | C | S | - | P
|link:#load-store-cap[STC] |S |`0` |`100` | - | I | C | - | S | N | T
| |I |`1` |`100` | - | C | C | - | S | N | T
| |I |- |`100` | - | C | C | - | S | S | T
| |I |- |`100` | - | C | C | - | S | - | P
|===

.Control flow instructions
[%header%autowidth.stretch]
|===
|Mnemonic |Format |Func3  |Func7 | rs1 | rs2 | rd | imm[11:0] | World | Variant
|link:#domain-cross[CALL]        |R |`001`    |`0100000` | C | - | - | - | S | T
|        |R |`001`    |`0100000` | C | - | - | - | - | P
|link:#domain-cross[RETURN]      |R |`001`    |`0100001` | C | I | - | - | S | T
|      |R |`001`    |`0100001` | C | I | - | - | - | P
|link:#jmp-cap[CJALR]         |I |`101`    |- | C | - | C | S | S | T
|         |I |`101`    |- | C | - | C | S | - | P
|link:#jmp-cap[CBNZ]         |I |`110`    |- | I | - | C | S | S | T
|         |I |`110`    |- | I | - | C | S | - | P
|link:#world-switch[CAPENTER]    |R |`001`    |`0100010` | C | - | I | - | N | T
|link:#world-switch[CAPEXIT]     |R |`001`    |`0100011` | C | I | - | - | S | T
|===

.Control state instructions
[%header%autowidth.stretch]
|===
|Mnemonic |Format |Func3  |Func7 | rs1 | rs2 | rd | imm[11:0] | World | Variant
|link:#ccsr-man[CCSRRW] |I |`111`    | - | C | - | C | Z | * | *
|===

== Extended {base_isa_name} Memory Access Instructions

.Instruction format: I-type
[wavedrom,,svg]
....
{reg: [
    {bits: 7, name: '0b0000011'},
    {bits: 5, name: 'rd' },
    {bits: 3, name: 'func3' },
    {bits: 5, name: 'rs1' },
    {bits: 12, name: 'imm[11:0]' }
]}
....

.Instruction format: S-type
[wavedrom,,svg]
....
{reg: [
    {bits: 7, name: '0b0100011'},
    {bits: 5, name: 'imm[4:0]' },
    {bits: 3, name: 'func3' },
    {bits: 5, name: 'rs1' },
    {bits: 5, name: 'rs2' },
    {bits: 7, name: 'imm[11:5]' }
]}
....

.Extended {base_isa_name} load instructions
[%header%autowidth.stretch]
|===
|Mnemonic |Format |`emode` |Func3  |Func7 | rs1 | rs2 | rd | imm[11:0] | World | Variant
|link:#load-store[lb] |I |`0` |`000` | - | I | - | I | S | N | T
| |I |`1` |`000` | - | C | - | I | S | N | T
| |I |- |`000` | - | C | - | I | S | S | T
| |I |- |`000` | - | C | - | I | S | - | P
|link:#load-store[lh] |I |`0` |`001` | - | I | - | I | S | N | T
| |I |`1` |`001` | - | C | - | I | S | N | T
| |I |- |`001` | - | C | - | I | S | S | T
| |I |- |`001` | - | C | - | I | S | - | P
|link:#load-store[lw] |I |`0` |`010` | - | I | - | I | S | N | T
| |I |`1` |`010` | - | C | - | I | S | N | T
| |I |- |`010` | - | C | - | I | S | S | T
| |I |- |`010` | - | C | - | I | S | - | P
|link:#load-store[ld] |I |`0` |`011` | - | I | - | I | S | N | T
| |I |`1` |`011` | - | C | - | I | S | N | T
| |I |- |`011` | - | C | - | I | S | S | T
| |I |- |`011` | - | C | - | I | S | - | P
|link:#load-store[lbu] |I |`0` |`100` | - | I | - | I | S | N | T
| |I |`1` |`100` | - | C | - | I | S | N | T
| |I |- |`100` | - | C | - | I | S | S | T
| |I |- |`100` | - | C | - | I | S | - | P
|link:#load-store[lhu] |I |`0` |`101` | - | I | - | I | S | N | T
| |I |`1` |`101` | - | C | - | I | S | N | T
| |I |- |`101` | - | C | - | I | S | S | T
| |I |- |`101` | - | C | - | I | S | - | P
|link:#load-store[lwu] |I |`0` |`110` | - | I | - | I | S | N | T
| |I |`1` |`110` | - | C | - | I | S | N | T
| |I |- |`110` | - | C | - | I | S | S | T
| |I |- |`110` | - | C | - | I | S | - | P
|===

.Extended {base_isa_name} store instructions
[%header%autowidth.stretch]
|===
|Mnemonic |Format |`emode` |Func3  |Func7 | rs1 | rs2 | rd | imm[11:0] | World | Variant
|link:#load-store[sb] |S |`0` |`000` | - | I | I | - | S | N | T
| |S |`1` |`000` | - | C | I | - | S | N | T
| |S |- |`000` | - | C | I | - | S | S | T
| |S |- |`000` | - | C | I | - | S | - | P
|link:#load-store[sh] |S |`0` |`001` | - | I | I | - | S | N | T
| |S |`1` |`001` | - | C | I | - | S | N | T
| |S |- |`001` | - | C | I | - | S | S | T
| |S |- |`001` | - | C | I | - | S | - | P
|link:#load-store[sw] |S |`0` |`010` | - | I | I | - | S | N | T
| |S |`1` |`010` | - | C | I | - | S | N | T
| |S |- |`010` | - | C | I | - | S | S | T
| |S |- |`010` | - | C | I | - | S | - | P
|link:#load-store[sd] |S |`0` |`011` | - | I | I | - | S | N | T
| |S |`1` |`011` | - | C | I | - | S | N | T
| |S |- |`011` | - | C | I | - | S | S | T
| |S |- |`011` | - | C | I | - | S | - | P
|===

.Note
****
*For instruction operands:*

I:: Integer register
C:: Capability register
S:: Used as sign-extended immediate
Z:: Used as zero-extended immediate
-:: Not used

*For immediates:*

S:: Sign-extended
Z:: Zero-extended
-:: Not used

*For worlds:*

N:: Normal world
S:: Secure world
*:: Either world

*For variants:*

P:: _{isa_var_pure}_
T:: _{isa_var_hybrid}_
*:: Either variant
****
